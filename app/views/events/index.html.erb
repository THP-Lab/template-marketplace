<p style="color: green"><%= notice %></p>

<% content_for :title, "Événements" %>
<% content_for :meta_description, "Calendrier des marchés médiévaux, ateliers et rencontres à venir organisés par l'atelier." %>
<% content_for :structured_data do %>
  <% listed_events = @events.respond_to?(:limit) ? @events.first(20) : Array(@events).first(20) %>
  <%= jsonld_tag(item_list_schema(listed_events,
                                  type: "Event",
                                  name: "Calendrier des événements",
                                  url_proc: ->(event) { event_url(event) })) %>
<% end %>

<h1>Events</h1>

<div style="margin-bottom: 24px;">
  <%= month_calendar(events: @events) do |date, events| %>
    <div><%= date.day %></div>
    <% events.each do |event| %>
      <div>
        <%= link_to event.title, event %>
      </div>
    <% end %>
  <% end %>
</div>

<div id="events">
  <% @events.each do |event| %>
    <%= render event %>
    <p>
      <%= link_to "Show this event", event %>
    </p>
  <% end %>
</div>

<%= link_to "New event", new_event_path %>
